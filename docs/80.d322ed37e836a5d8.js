"use strict";(self.webpackChunkFreshcart=self.webpackChunkFreshcart||[]).push([[80],{5080:(f,u,n)=>{n.r(u),n.d(u,{WishlistComponent:()=>W});var _=n(6814),m=n(3519),d=n.n(m),p=n(1120),a=n(8129),t=n(4769),o=n(9196),l=n(6286);function g(r,h){if(1&r){const i=t.EpF();t.TgZ(0,"i",21),t.NdJ("click",function(){t.CHM(i);const e=t.oxw().$implicit,c=t.oxw(2);return t.KtG(c.addToWishlist(e._id))}),t.qZA()}}function v(r,h){if(1&r){const i=t.EpF();t.TgZ(0,"i",22),t.NdJ("click",function(){t.CHM(i);const e=t.oxw().$implicit,c=t.oxw(2);return t.KtG(c.removeFromWishlist(e._id))}),t.qZA()}}const C=function(r){return["/details",r]};function x(r,h){if(1&r){const i=t.EpF();t.TgZ(0,"div",7)(1,"div",8),t.YNc(2,g,1,0,"i",9),t.YNc(3,v,1,0,"i",10),t.TgZ(4,"div",11),t._UZ(5,"img",12),t.TgZ(6,"h4",13),t._uU(7),t.qZA(),t.TgZ(8,"h5",14),t._uU(9),t.ALo(10,"cuttext"),t.qZA(),t.TgZ(11,"div",15)(12,"p"),t._uU(13),t.qZA(),t.TgZ(14,"p"),t._UZ(15,"i",16),t.TgZ(16,"span",17),t._uU(17),t.qZA()()()(),t.TgZ(18,"button",18,19),t.NdJ("click",function(){const c=t.CHM(i).$implicit,E=t.MAs(19),T=t.oxw(2);return t.KtG(T.addProduct(c._id,E))}),t._uU(20," Add Product"),t._UZ(21,"i",20),t.qZA()()()}if(2&r){const i=h.$implicit,s=t.oxw(2);t.xp6(2),t.Q6J("ngIf",!s.wishlistProductId.includes(i._id)),t.xp6(1),t.Q6J("ngIf",s.wishlistProductId.includes(i._id)),t.xp6(1),t.Q6J("routerLink",t.VKq(13,C,i._id)),t.xp6(1),t.Q6J("title",i.title)("src",i.imageCover,t.LSH)("alt",i.title),t.xp6(2),t.Oqu(i.category.name),t.xp6(2),t.hij(" ",t.xi3(10,10,i.title,2)," "),t.xp6(4),t.hij("",i.price," EGP"),t.xp6(4),t.hij(" ",i.ratingsAverage,"")}}function O(r,h){if(1&r&&(t.TgZ(0,"section",2)(1,"h1",3),t._uU(2,"Your WishList "),t._UZ(3,"i",4),t._uU(4,":"),t.qZA(),t.TgZ(5,"div",5),t.YNc(6,x,22,15,"div",6),t.qZA()()),2&r){const i=t.oxw();t.xp6(6),t.Q6J("ngForOf",i.productOfWhichlist)}}function P(r,h){1&r&&(t.TgZ(0,"h2",23),t._uU(1,"You Don`t Have Any Favorite Products Yet! "),t._UZ(2,"i",24),t.qZA())}let W=(()=>{class r{constructor(i,s,e){this._WishlistService=i,this._CartService=s,this._Renderer2=e,this.productOfWhichlist=[],this.wishlistProductId=[]}ngOnInit(){this._WishlistService.getWishlist().subscribe({next:i=>{console.log(i),this.productOfWhichlist=i.data;const s=i.data.map(e=>e._id);this.wishlistProductId=s},error:i=>{console.log(i)}})}addProduct(i,s){this._Renderer2.setAttribute(s,"disabled","true"),this._CartService.addToCart(i).subscribe({next:e=>{console.log(e),"success"==e.status&&(d().fire({position:"top-end",icon:"success",title:e.message,showConfirmButton:!1,timer:1500}),this._Renderer2.removeAttribute(s,"disabled"),this._CartService.cartNumber.next(e.numOfCartItems))},error:e=>{console.log(e),this._Renderer2.removeAttribute(s,"disabled")}})}addToWishlist(i){this._WishlistService.addProductWishlist(i).subscribe({next:s=>{console.log(s.data),"success"==s.status&&(d().fire({position:"top-end",icon:"success",title:s.message,showConfirmButton:!1,timer:1500}),this.wishlistProductId=s.data,this._WishlistService.wishlistNumber.next(s.data.length))}})}removeFromWishlist(i){this._WishlistService.removeProductWishlist(i).subscribe({next:s=>{if("success"==s.status){d().fire({position:"top-end",icon:"info",title:s.message,showConfirmButton:!1,timer:1500}),this.wishlistProductId=s.data;const e=this.productOfWhichlist.filter(c=>this.wishlistProductId.includes(c._id));console.log("new",e),this.productOfWhichlist=e,this._WishlistService.wishlistNumber.next(s.data.length)}}})}static#t=this.\u0275fac=function(s){return new(s||r)(t.Y36(o.M),t.Y36(l.N),t.Y36(t.Qsj))};static#i=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-wishlist"]],standalone:!0,features:[t.jDz],decls:3,vars:2,consts:[["class","py-4 mx-5",4,"ngIf","ngIfElse"],["msg",""],[1,"py-4","mx-5"],[1,"text-main","fw-semibold","mb-2"],[1,"fa-solid","fa-shield-heart","text-main","fa-1x","mx-2","fa-bounce"],[1,"row","g-4"],["class","col-md-2",4,"ngFor","ngForOf"],[1,"col-md-2"],[1,"product","cursor-pointer","p-2","h-100"],["class","fa-regular fa-heart heart",3,"click",4,"ngIf"],["class","fa-solid fa-heart heart",3,"click",4,"ngIf"],["role","button",3,"routerLink"],["title",".",1,"w-100",3,"title","src","alt"],[1,"h6","my-2"],[1,"h6","text-main"],[1,"d-flex","align-items-center","justify-content-between","my-2"],[1,"fas","fa-star","rating-color"],[1,"text-muted"],[1,"main-btn","w-100","my-1",3,"click"],["btnAdd",""],[1,"fas","fa-cart-plus","ms-1","fa-bounce"],[1,"fa-regular","fa-heart","heart",3,"click"],[1,"fa-solid","fa-heart","heart",3,"click"],[1,"text-center","text-main","mt-5"],[1,"fa-regular","fa-face-sad-tear","mx-2","fa-bounce"]],template:function(s,e){if(1&s&&(t.YNc(0,O,7,1,"section",0),t.YNc(1,P,3,0,"ng-template",null,1,t.W1O)),2&s){const c=t.MAs(2);t.Q6J("ngIf",e.productOfWhichlist.length>0)("ngIfElse",c)}},dependencies:[_.ez,_.sg,_.O5,p.rH,a.r],styles:[".product[_ngcontent-%COMP%]{border:solid 1px #0aad0a!important;transition:all .5s;overflow:hidden!important}.product[_ngcontent-%COMP%]:hover{box-shadow:0 0 10px #11bd1168;transform:scale(1.01)}.product[_ngcontent-%COMP%]   .main-btn[_ngcontent-%COMP%]{transform:translateY(190%);opacity:0;transition:all .5s}.product[_ngcontent-%COMP%]:hover   .main-btn[_ngcontent-%COMP%]{transform:translateY(0);opacity:1}"]})}return r})()},6286:(f,u,n)=>{n.d(u,{N:()=>p});var _=n(5619),m=n(4769),d=n(9862);let p=(()=>{class a{constructor(o){this._HttpClient=o,this.cartNumber=new _.X(0),this.baseUrl="https://ecommerce.routemisr.com"}addToCart(o){return this._HttpClient.post(this.baseUrl+"/api/v1/cart",{productId:o})}getUserCart(){return this._HttpClient.get(this.baseUrl+"/api/v1/cart")}removeItemFromCart(o){return this._HttpClient.delete(this.baseUrl+`/api/v1/cart/${o}`)}updateCart(o,l){return this._HttpClient.put(this.baseUrl+`/api/v1/cart/${o}`,{count:l})}clearAllCart(){return this._HttpClient.delete(this.baseUrl+"/api/v1/cart")}checkOutSession(o,l){return this._HttpClient.post(this.baseUrl+`/api/v1/orders/checkout-session/${o}?url=https://Med7at74.github.io/FreshCart-E-Commerce`,{shippingAddress:l})}getUserOrder(o){return this._HttpClient.get(this.baseUrl+`/api/v1/orders/user/${o}`)}static#t=this.\u0275fac=function(l){return new(l||a)(m.LFG(d.eN))};static#i=this.\u0275prov=m.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})()}}]);