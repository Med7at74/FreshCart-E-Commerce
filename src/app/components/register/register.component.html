<section class="my-4 p-4 w-75 mx-auto bg-main-light rounded-2">
  <h2>Register Now :</h2>

  <form [formGroup]="registerForm" (ngSubmit)="registerFun()">
    <div class="mb-3">
      <label for="name">Your name</label>
      <input
        #nameInput
        formControlName="name"
        type="text"
        id="name"
        class="form-control"
      />
      <div
        class="alert alert-danger"
        *ngIf="
          registerForm.get('name')?.errors &&
          (registerForm.get('name')?.touched || nameInput.value.length > 0)
        "
      >
        <p *ngIf="registerForm.get('name')?.getError('required')">
          name is required
        </p>
        <p *ngIf="registerForm.get('name')?.getError('minlength')">
          must be at least 3 chars
        </p>
        <p *ngIf="registerForm.get('name')?.getError('maxlength')">
          name max length 20
        </p>
      </div>
    </div>
    <div class="mb-3">
      <label for="email">Your email</label>
      <input
        #emailInput
        formControlName="email"
        type="email"
        id="email"
        class="form-control"
      />
      <div
        class="alert alert-danger"
        *ngIf="
          registerForm.get('email')?.errors &&
          (registerForm.get('email')?.touched || emailInput.value.length > 0)
        "
      >
        <p *ngIf="registerForm.get('email')?.getError('required')">
          Email is required
        </p>
        <p *ngIf="registerForm.get('email')?.getError('email')">
          Email InValid Format
        </p>
      </div>
    </div>
    <div class="mb-3">
      <label for="password">Your password</label>
      <input
        #passwordInput
        formControlName="password"
        type="password"
        id="password"
        class="form-control"
      />
      <div
        class="alert alert-danger"
        *ngIf="
          registerForm.get('password')?.errors &&
          (registerForm.get('password')?.touched ||
            passwordInput.value.length > 0)
        "
      >
        <p *ngIf="registerForm.get('password')?.getError('required')">
          Password is required
        </p>
        <p *ngIf="registerForm.get('password')?.getError('pattern')">
          password must start with upperCase then from 6 to 10
        </p>
      </div>
    </div>
    <div class="mb-3">
      <label for="rePassword">RePassword</label>
      <input
        #rePasswordInput
        formControlName="rePassword"
        type="password"
        id="rePassword"
        class="form-control"
      />
      <div
        class="alert alert-danger"
        *ngIf="
          registerForm.get('rePassword')?.errors &&
          (registerForm.get('rePassword')?.touched ||
            rePasswordInput.value.length > 0)
        "
      >
        <p *ngIf="registerForm.get('rePassword')?.getError('required')">
          rePassword is required
        </p>
        <p *ngIf="registerForm.get('rePassword')?.getError('mismatch')">
          Password confirmation is incorrect
        </p>
      </div>
    </div>
    <div class="mb-3">
      <label for="phone">Your phone</label>
      <input
        #phoneInput
        formControlName="phone"
        type="tel"
        id="phone"
        class="form-control"
      />
      <div
        class="alert alert-danger"
        *ngIf="
          registerForm.get('phone')?.errors &&
          (registerForm.get('phone')?.touched || phoneInput.value.length > 0)
        "
      >
        <p *ngIf="registerForm.get('phone')?.getError('required')">
          phone is required
        </p>
        <p *ngIf="registerForm.get('phone')?.getError('pattern')">
          accept only egypt phone numbers
        </p>
      </div>
    </div>

    <button [disabled]="registerForm.invalid" class="main-btn d-block ms-auto">
      {{ btnText }}
      <i *ngIf="isLoading" class="fas fa-spinner fa-spin"></i>
    </button>

    <p
      class="alert alert-danger w-75 mx-auto text-center mt-2"
      *ngIf="errorMessage"
    >
      {{ errorMessage }}
    </p>
  </form>
</section>
